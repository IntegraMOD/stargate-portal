<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="modx.prosilver.en.xsl"?>
<!--For security purposes, please check: http://www.phpbb.com/mods/ for the latest version of this MOD. Although MODs are checked before being allowed in the MODs Database there is no guarantee that there are no security problems within the MOD. No support will be given for MODs not found within the MODs Database which can be found at http://www.phpbb.com/mods/-->
<mod xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.phpbb.com/mods/xml/modx-1.2.2.xsd">
	<header>
		<license>http://opensource.org/licenses/gpl-license.php GNU General Public License v2</license>
		<title lang="en">Stargate Portal Update script 0.4.0 to RC1.0.0</title>
		<description lang="en">This file will assist in updating you site to RC1 of Stargate Portal</description>
		<author-notes lang="en">Not test yet! Please report problems to: http://www.stargate-portal.com</author-notes>


    <author-group>
      <author>
        <realname>Michael O'Toole</realname>
        <email>o2l@eircom.net</email>
        <username>michaelo</username>
        <homepage>http://www.phpbbireland.com</homepage>
        <contributions />
      </author>
	  </author-group>


		<mod-version>1.0.0</mod-version>
		<installation>
			<level>easy</level>
			<time>200</time>
			<target-version>3.0.4</target-version>
		</installation>
		<history/>
	</header>
	<action-group>
		<open src="common.php">
			<edit>
				<find>function get_user_avatar($avatar, $avatar_type, $avatar_width, $avatar_height, $alt = 'USER_AVATAR')</find>
				<action type="replace-with"><![CDATA[function sgp_get_user_avatar($avatar, $avatar_type, $avatar_width, $avatar_height, $alt = 'USER_AVATAR')]]></action>
			</edit>
		</open>
		<open src="mcp.php">
			<edit>
				<find>		'make_global'	=&gt; 'f_announce',
		'make_news'		=&gt; 'f_announce',
		'make_news_global'	=&gt; 'f_announce',</find>
				<action type="replace-with"><![CDATA[		'make_global'	=> 'f_announce',]]></action>
			</edit>
			<edit>
				<find>		case 'make_normal':
		case 'make_news':
		case 'make_news_global':</find>
				<action type="replace-with"><![CDATA[		case 'make_normal':]]></action>
			</edit>
		</open>
		<open src="search.php">
			<edit>
				<find>// Stargate Portal
if(STARGATE)
{
	$user-&gt;add_lang('portal/portal');
	include_once($phpbb_root_path . 'includes/sgp_functions.'. $phpEx );
	include_once($phpbb_root_path . 'includes/portal_blocks.' . $phpEx);
}
// Stargate Portal</find>
				<action type="replace-with"><![CDATA[// Stargate Portal
if(STARGATE)
{
	global $k_config, $k_blocks;
	include_once($phpbb_root_path . 'includes/sgp_functions.'. $phpEx );
}
// Stargate Portal]]></action>
			</edit>
			<edit>
				<find><![CDATA[			if ($user->data['is_registered'])
			{
				if ($config['load_db_track'] && $author_id !== $user->data['user_id'])
				{
					$sql_from .= ' LEFT JOIN ' . TOPICS_POSTED_TABLE . ' tp ON (tp.user_id = ' . $user->data['user_id'] . '
						AND t.topic_id = tp.topic_id)';
					$sql_select .= ', tp.topic_posted';
				}

				if ($config['load_db_lastread'])
				{
					$sql_from .= ' LEFT JOIN ' . TOPICS_TRACK_TABLE . ' tt ON (tt.user_id = ' . $user->data['user_id'] . '
							AND t.topic_id = tt.topic_id)
						LEFT JOIN ' . FORUMS_TRACK_TABLE . ' ft ON (ft.user_id = ' . $user->data['user_id'] . '
							AND ft.forum_id = f.forum_id)';
					$sql_select .= ', tt.mark_time, ft.mark_time as f_mark_time';
				}
			}]]></find>
				<action type="after-add">			if(STARGATE)
			{
				// move to databse in next revision //
				$k_config['tooltips_active'] = true;
				$k_config['tooltips_first'] = false;
				$k_config['tooltips_last'] = true;

				// Improved sql thanks to Rich McGirr and his Topic Text Hover Mod //
				if ($k_config['tooltips_active'])
				{
					if($k_config['tooltips_first'])
					{
						$sql_from .= ' LEFT JOIN ' . POSTS_TABLE . ' p ON (p.post_id = t.topic_first_post_id)';
			   			$sql_select .= ', p.post_text AS first_message_tooltip';
					}
					if($k_config['tooltips_last'])
					{
						$sql_from .= ' LEFT JOIN ' . POSTS_TABLE . ' pt ON (pt.post_id = t.topic_last_post_id)';
						$sql_select .= ', pt.post_text AS last_message_tooltip';
					}
				}
			}</action>
			</edit>
			<edit>
				<find>				$tpl_ary = array(</find>
				<action type="after-add">					'TOOLTIP'					=&gt; (STARGATE) ? sgp_truncate_message(bbcode_strip(($row['last_message_tooltip'])), 500) : '',</action>
			</edit>
		</open>
		<open src="viewforum.php">
			<edit>
				<find><![CDATA[if ($user->data['is_registered'])
{
	if ($config['load_db_track'])
	{
		$sql_array['LEFT_JOIN'][] = array('FROM' => array(TOPICS_POSTED_TABLE => 'tp'), 'ON' => 'tp.topic_id = t.topic_id AND tp.user_id = ' . $user->data['user_id']);
		$sql_array['SELECT'] .= ', tp.topic_posted';
	}

	if ($config['load_db_lastread'])
	{
		$sql_array['LEFT_JOIN'][] = array('FROM' => array(TOPICS_TRACK_TABLE => 'tt'), 'ON' => 'tt.topic_id = t.topic_id AND tt.user_id = ' . $user->data['user_id']);
		$sql_array['SELECT'] .= ', tt.mark_time';

		if ($s_display_active && sizeof($active_forum_ary))
		{
			$sql_array['LEFT_JOIN'][] = array('FROM' => array(FORUMS_TRACK_TABLE => 'ft'), 'ON' => 'ft.forum_id = t.forum_id AND ft.user_id = ' . $user->data['user_id']);
			$sql_array['SELECT'] .= ', ft.mark_time AS forum_mark_time';
		}
	}
}]]></find>
				<action type="after-add">if(STARGATE)
{
	// move to databse in next revision //
	$k_config['tooltips_active'] = true;
	$k_config['tooltips_first'] = false;
	$k_config['tooltips_last'] = true;

	// Improved sql thank to Rich McGirr and his Topic Text Hover Mod //
	if ($k_config['tooltips_active'])
	{
		if($k_config['tooltips_first'])
		{
			$sql_array['LEFT_JOIN'][] = array('FROM' =&gt; array(POSTS_TABLE =&gt; 'pt'), 'ON' =&gt; 'pt.post_id = t.topic_first_post_id');
			$sql_array['SELECT'] .= ', pt.post_text AS first_message_toopltips';
		}
		if($k_config['tooltips_last'])
		{
			$sql_array['LEFT_JOIN'][] = array('FROM' =&gt; array(POSTS_TABLE =&gt; 'ptl'), 'ON' =&gt; 'ptl.post_id = t.topic_last_post_id');
			$sql_array['SELECT'] .= ', ptl.post_text AS last_message_tooltip';
		}
	}
}</action>
			</edit>
			<edit>
				<find>	$sql = 'SELECT *
		FROM ' . TOPICS_TABLE . '
		WHERE ' . $db-&gt;sql_in_set('topic_id', array_keys($shadow_topic_list));
	$result = $db-&gt;sql_query($sql);</find>

<action type="replace-with"><![CDATA[	$sql = 'SELECT  t. * ' . $sql_select . '
		FROM ' . TOPICS_TABLE . ' t
		' . $sql_join . '
		WHERE ' . $db->sql_in_set(' t.topic_id', array_keys($shadow_topic_list));
	$result = $db->sql_query($sql);]]></action>



			</edit>
			<edit>
				<find>		// Send vars to template
		$template-&gt;assign_block_vars('topicrow', array(
			'FORUM_ID'					=&gt; $forum_id,</find>
				<action type="after-add">			'TOOLTIP'					=&gt; (STARGATE) ? sgp_truncate_message(bbcode_strip(($row['last_message_tooltip'])), 500) : '',</action>
			</edit>
		</open>
		<open src="viewtopics.php">
			<edit>
				<find>	$message = sgp_local_acronyms($message);</find>
				<action type="replace-with"><![CDATA[	if(STARGATE)
		$message = sgp_local_acronyms($message);]]></action>
			</edit>
		</open>
		<open src="includes/function_template.php">
			<edit>
				<find>		if (!file_exists($this-&gt;template-&gt;files[$handle]))
		{
			if(!STARGATE)
			{
				trigger_error(&quot;template-&gt;_tpl_load_file(): File {$this-&gt;template-&gt;files[$handle]} does not exist or is empty&quot;, E_USER_ERROR);
				return;
			}</find>
				<action type="replace-with"><![CDATA[		if (!file_exists($this->template->files[$handle]))
		{]]></action>
			</edit>
		</open>
		<open src="includes/functions_display.php">
			<edit>
				<find>?&gt;</find>
				<action type="before-add"><![CDATA[/**
* Get user avatar
*
* @param string $avatar Users assigned avatar name
* @param int $avatar_type Type of avatar
* @param string $avatar_width Width of users avatar
* @param string $avatar_height Height of users avatar
* @param string $alt Optional language string for alt tag within image, can be a language key or text
*
* @return string Avatar image
*/
function get_user_avatar($avatar, $avatar_type, $avatar_width, $avatar_height, $alt = 'USER_AVATAR')
{
	global $user, $config, $phpbb_root_path, $phpEx;

	if (empty($avatar) || !$avatar_type)
	{
		return '';
	}

	$avatar_img = '';

	switch ($avatar_type)
	{
		case AVATAR_UPLOAD:
			$avatar_img = $phpbb_root_path . "download/file.$phpEx?avatar=";
		break;

		case AVATAR_GALLERY:
			$avatar_img = $phpbb_root_path . $config['avatar_gallery_path'] . '/';
		break;
	}

	$avatar_img .= $avatar;
	return '<img src="' . (str_replace(' ', '%20', $avatar_img)) . '" width="' . $avatar_width . '" height="' . $avatar_height . '" alt="' . ((!empty($user->lang[$alt])) ? $user->lang[$alt] : $alt) . '" />';
}]]></action>
			</edit>
		</open>
		<open src="includes/functions.php">
			<edit>
				<find>		'AVATAR_SMALL_IMG'	=&gt; get_user_avatar($user-&gt;data['user_avatar'], $user-&gt;data['user_avatar_type'], '35', '35'),</find>
				<action type="replace-with"><![CDATA[		'AVATAR_SMALL_IMG'		=> sgp_get_user_avatar($user->data['user_avatar'], $user->data['user_avatar_type'], '35', '35'),]]></action>
			</edit>
			<edit>
				<find>	if(STARGATE)
	{
		$set_time = time() + 31536000;</find>
				<action type="replace-with"><![CDATA[]]></action>
			</edit>
			<edit>
				<find>		// some mods may change the root path so look in one deeper //</find>
				<action type="before-add">	if(STARGATE)
	{</action>
			</edit>
			<edit>
				<find>?&gt;</find>
				<action type="before-add"><![CDATA[/* From topic_text_hover mod by Rich McGirr copyright 2008 */
if(!function_exists('bbcode_strip'))
{
	function bbcode_strip($text)
	{
			static $RegEx = array();
			static $bbcode_strip = 'flash';
			// html is pretty but it may break the layout of the tooltip...let's
			// remove some common ones from the tip
			$text_html = array('&quot;','&amp;','&#039;','&lt;','&gt;');
			$text = str_replace($text_html,'',$text);
			if (empty($RegEx))
			{
				$RegEx = array('`<[^>]*>(.*<[^>]*>)?`Usi', // HTML code
					'`\[(' . $bbcode_strip . ')[^\[\]]+\].*\[/(' . $bbcode_strip . ')[^\[\]]+\]`Usi', // bbcode to strip
					'`\[/?[^\[\]]+\]`mi', // Strip all bbcode tags
					'`[\s]+`' // Multiple spaces
				);
			}
		return preg_replace($RegEx, ' ', $text );
	}
}]]></action>
			</edit>
		</open>
		<open src="includes/constants.php">
			<edit>
				<find>define('K_BLOCKS_TABLE',			$table_prefix . 'k_blocks');</find>
				<action type="after-add">define('K_CLOUD_TABLE',				$table_prefix . 'k_cloud');</action>
			</edit>
		</open>
		<open src="includes/cache.php">
			<edit>
				<find>				$icons[$row['icons_id']]['group'] = (int) $row['icons_group'];</find>
				<action type="replace-with"><![CDATA[				$icons[$row['icons_id']]['group'] = (bool) $row['icons_group'];]]></action>
			</edit>
		</open>
		<open src="language/en/common.php">
			<edit>
				<find>	'NO_ANNOUNCEMENTS'	=&gt; 'No current announcements',</find>
				<action type="after-add">	'VERSION'			=&gt; 'Version',</action>
			</edit>
			<edit>
				<find><![CDATA[	'CACHE_PURGED'		=> '<br />&nbsp;:&nbsp;Cache purged!',
	'CACHE_DIR_CLEANED'	=> '<br />&nbsp;:&nbsp;cache directory cleaned up.',]]></find>
				<action type="replace-with"><![CDATA[	'CACHE_PURGED'		=> '<br />&nbsp;&#187;&nbsp;Cache purged!',
	'CACHE_DIR_CLEANED'	=> '<br />&nbsp;&#187;&nbsp;cache directory cleaned up.',
	'DISABSLE_USE'		=> '<br />&nbsp;&#187;&nbsp;Disabled, use refresh in ACP for time being...',]]></action>
			</edit>
		</open>
		<open src="language/en/acp/common.php">
			<edit>
				<find>	'NO_EMAILS_DEFINED'		=&gt; 'No valid e-mail addresses found.',</find>
				<action type="after-add">	'NO_EDIT'				=&gt; 'Can\'t Edit',
	'NO_DELETE'				=&gt; 'Can\'t Delete',
	'NO_MOVE_DOWN'			=&gt; 'Can\'t move down',
	'NO_MOVE_UP'			=&gt; 'Can\'t move up',
	'NO_RESYNC'				=&gt; 'Resynchronise Disabled',</action>
			</edit>
			<edit>
				<find><![CDATA[// phpbbportal profile fields
$lang = array_merge($lang, array(

	'ACP_CAT_PORTAL'				=> 'Portal',
	'ACP_CAT_PORTAL_TOOLS'			=> 'Portal Tools',

	'ACP_K_ACRONYMS_MANAGE'		=> 'Manage Acronyms',
	'ACP_K_BLOCKS_MANAGE'		=> 'Organise Blocks',
	'ACP_K_CONFIG_MANAGE'		=> 'Set Config Values',
	'ACP_K_MENUS_MANAGE'		=> 'Manage Menus',
	'ACP_K_MODULES_MANAGE'		=> 'Portal Mini Mods',
	'ACP_K_NEWSFEEDS_MANAGE'	=> 'Manage Newsfeeds',
	'ACP_K_POLL_MANAGE'			=> 'Set-up Polls Options',
	'ACP_K_REFERERS_MANAGE'		=> 'Manage HTTP Referers',
	'ACP_K_VARS_MANAGE'			=> 'All Portal Module Variables',
	'ACP_K_WEB_PAGES_MANAGE'	=> 'Portal Web Pages',
	'ACP_K_TOOLS_MANAGE'		=> 'Portal Mods',

// Blocks
	'ACP_K_BLOCKS'					=> 'Blocks',
	'ACP_K_BLOCKS_ADD'				=> 'Add a New Block',
	'ACP_K_BLOCKS_EDIT'				=> 'Edit Block',
	'ACP_K_BLOCKS_DELETE'			=> 'Delete Blocks',
	'ACP_K_BLOCKS_MANAGE'			=> 'Manage Blocks',
	'ACP_K_UP'						=> 'Move Up',
	'ACP_K_DOWN'					=> 'Move Down',
	'ACP_K_PAGE_LEFT_BLOCKS'		=> 'Manage Left Blocks',
	'ACP_K_PAGE_CERTRE_BLOCKS'		=> 'Manage Centre Blocks',
	'ACP_K_PAGE_RIGHT_BLOCKS'		=> 'Manage Right Blocks',

// Menus
	'ACP_K_MENUS'					=> 'Menus',
	'ACP_K_MENU_HEADER'				=> 'Header Menus',
	'ACP_K_MENU_MAIN'				=> 'Main (navigation) Menu',
	'ACP_K_MENU_SUB'				=> 'Sub (secondary) Menus',
	'ACP_K_MENU_MANAGE'				=> 'Manage Menus',
	'ACP_K_MENU_CREATE'				=> 'Create a new Menu Item',
	'ACP_K_MENU_EDIT'				=> 'Edit Menu Item',
	'ACP_K_MENU_DELETE'				=> 'Delete a Menu Item',
	'ACP_K_MENU_ICONS'				=> 'Manage Menu Icons',
	'ACP_K_MENU_ALL'				=> 'View all Menu Items',
	'ACP_K_MENU_UNALLOCATED'		=> 'View unallocated items',

// Modules

	'ACP_K_MODS_ADD'				=> 'Add a New Module',
	'ACP_K_MODS_BLOCKS'				=> 'Manage Block Module',
	'ACP_K_MODS_BUGS'				=> 'Manage  Bugs Module',
	'ACP_K_MODS_MODULES'			=> 'Manage  Mods Modules',
	'ACP_K_MODS_STYLES'				=> 'Manage  Styles Module',
	'ACP_K_MODS_STATUS'				=> 'Manage  Status Module',
	'ACP_K_MODS_MISC'				=> 'Manage  Miscellaneous Modules',
	'ACP_K_MODS_ALL'				=> 'Manage Modules',
	'ACP_K_MODS_EDIT'				=> 'Edit Module',
	'ACP_K_MODS_DELETE'				=> 'Delete Module',
	'ACP_K_CONFIG_WELCOME'			=> 'Manage Welcome Message',
	'ACP_K_CONFIG_STYLES'			=> 'Manage Styles Mods',

// Modules Web Pages
	'ACP_K_WEB_PAGES_ADD'			=> 'Add a New Web Page',
	'ACP_K_WEB_PAGES_ALL'			=> 'View all pages',
	'ACP_K_WEB_PAGES_EDIT'			=> 'Edit Web Page',
	'ACP_K_WEB_PAGES_DELETE'		=> 'Delete this web page',
	'ACP_K_WEB_PAGES_BODY'			=> 'Manage page bodies',
	'ACP_K_WEB_PAGES_HEAD'			=> 'Manage page headers',
	'ACP_K_WEB_PAGES_FOOT'			=> 'Manage page footers',

// Modules Variables
	'ACP_K_VARS'				=> 'Portal Variables',
	'ACP_K_CONFIG'				=> 'Main Config',
	'ACP_K_PORTAL_CONFIG'		=> 'Portal Config',
	'ACP_K_MODULES'				=> 'Mini Modules ',
	'ACP_K_VARS_CONFIG'			=> 'Configure Variables',
	'ACP_K_VARS_CONFIG2'		=> 'Block Module Variables',
	'ACP_K_POLL'				=> 'Poll Variables',
	'ACP_K_NEWSFEEDS'			=> 'Newsfeeds Variables',
	'ACP_K_ACRONYMS'			=> 'Acronyms',
	'ACP_K_WEB_PAGES'			=> 'Web Pages',
	'ACP_K_REFERERS'			=> 'HTTP Referers',
	'ACP_K_TOOLS'				=> 'Additional Mods and Tools',
	'ACP_MOD_VERSION_CHECK'		=> 'Mod Version Check',

));


// Stargate aka Kiss Plugins module
$lang = array_merge($lang, array(

	'ACP_CAT_K_BLOCKS_MANAGE'		=> 'Portal Blocks',
	'ACP_CAT_K_MENUS_MANAGE'		=> 'Portal Menus',

	'ACP_CAT_K_MODULES_MANAGE'		=> 'Portal Mini Modules',
	'ACP_CAT_K_TOOLS_MANAGE'		=> 'Portal Tools & other Mods',

	'ACP_CAT_K_WEB_PAGES_MANAGE'	=> 'Portal Web Pages',

	'ACP_CAT_PLUGINS'			=> 'Plugins',
	'ACP_CAT_PLUGINS_EXPLAIN'	=> 'Stargate Portal Plug-ins Mod Manager',

	'ACP_PLUGINS'				=> 'Plugins',
	'ACP_PLUGIN_VARIABLES'		=> 'Configure Defaults',
	'ACP_PLUGIN_CONFIG'			=> 'Configure Plugin Defaults',

	'ACP_PLUGIN_MANAGE'			=> 'Manage Plugin',
	'ACP_PLUGIN_ADD'			=> 'Add New Plugin',
	'ACP_PLUGIN_EDIT'			=> 'Edit Plugin',
	'ACP_PLUGIN_DELETE'			=> 'Delete Plugin',
	'ACP_PLUGIN_UPDATE'			=> 'Update plugin',
	'ACP_PLUGIN_UP'				=> 'Move Up',
	'ACP_PLUGIN_DOWN'			=> 'Move Down',
	'AVAILABLE_FORUM_IMAGE'		=> 'Available Images',
	'AVAILABLE_FORUM_IMAGE_EXPLAIN'		=> 'Display a list of available forum images (images/forum_icons/). Hover over an image to see the path/name...',
	'SHOW_FORUM_IMAGES'					=> 'Show available forum images.',
));
// phpbbportal profile fields


// Mike
$lang = array_merge($lang, array(
	'MOD_IMAGES'  => 'The image mod allows the admin to select images for editing where images are stored in the Admins current style.',
	'MOD_ICONS'   => 'The image mod allows the admin to select icons for editing where icons are stored in the Admins current style.',
));]]></find>
				<action type="replace-with"><![CDATA[// phpbbportal profile fields
$lang = array_merge($lang, array(

	'ACP_CAT_PORTAL'				=> 'Portal',
	'ACP_CAT_PORTAL_TOOLS'			=> 'Portal Tools',
	'ACP_CAT_CLOUD'					=> 'Cloud Tags',

// Common
	'ACP_K_UP'						=> 'Move Up',
	'ACP_K_DOWN'					=> 'Move Down',

// Blocks
	'ACP_K_BLOCKS'					=> 'Blocks',
	'ACP_K_BLOCKS_ADD'				=> 'Add a New Block',
	'ACP_K_BLOCKS_EDIT'				=> 'Edit Block',
	'ACP_K_BLOCKS_DELETE'			=> 'Delete Blocks',
	'ACP_K_BLOCKS_MANAGE'			=> 'Manage All Blocks',
	'ACP_K_PAGE_LEFT_BLOCKS'		=> 'Manage Left Blocks',
	'ACP_K_PAGE_CERTRE_BLOCKS'		=> 'Manage Centre Blocks',
	'ACP_K_PAGE_RIGHT_BLOCKS'		=> 'Manage Right Blocks',

// Menus
	'ACP_K_MENUS'					=> 'Menus',
	'ACP_K_MENU_HEADER'				=> 'Header Menus',
	'ACP_K_MENU_MAIN'				=> 'Main (navigation) Menu',
	'ACP_K_MENU_SUB'				=> 'Sub (secondary) Menus',
	'ACP_K_MENU_MANAGE'				=> 'Manage Menus',
	'ACP_K_MENU_CREATE'				=> 'Create a new Menu Item',
	'ACP_K_MENU_EDIT'				=> 'Edit Menu Item',
	'ACP_K_MENU_DELETE'				=> 'Delete a Menu Item',
	'ACP_K_MENU_ICONS'				=> 'Manage Menu Icons',
	'ACP_K_MENU_ALL'				=> 'View all Menu Items',
	'ACP_K_MENU_UNALLOCATED'		=> 'View unallocated items',

// Modules
	'ACP_K_MODS_ADD'				=> 'Add a New Module',
	'ACP_K_MODS_BLOCKS'				=> 'Block Modules',
	'ACP_K_MODS_BUGS'				=> 'Bugs Modules',
	'ACP_K_MODS_MODULES'			=> 'Mods Modules',
	'ACP_K_MODS_STYLES'				=> 'Styles Modules',
	'ACP_K_MODS_STATUS'				=> 'Status Modules',
	'ACP_K_MODS_MISC'				=> 'Miscellaneous Modules',
	'ACP_K_MODS_MODS'				=> 'Mod Modules',
	'ACP_K_MODS_ALL'				=> 'All Modules',
	'ACP_K_MODS_EDIT'				=> 'Edit Module',
	'ACP_K_MODS_DELETE'				=> 'Delete Module',
	'ACP_K_CONFIG_WELCOME'			=> 'Manage Welcome Message',
	'ACP_K_CONFIG_STYLES'			=> 'Manage Styles Mods',

// Modules Web Pages
	'ACP_K_WEB_PAGES_ADD'			=> 'Add a New Web Page',
	'ACP_K_WEB_PAGES_ALL'			=> 'View all pages',
	'ACP_K_WEB_PAGES_EDIT'			=> 'Edit Web Page',
	'ACP_K_WEB_PAGES_DELETE'		=> 'Delete this web page',
	'ACP_K_WEB_PAGES_BODY'			=> 'Page Bodies',
	'ACP_K_WEB_PAGES_HEAD'			=> 'Page Headers',
	'ACP_K_WEB_PAGES_FOOT'			=> 'Page Footers',
	'ACP_K_WEB_PAGES_PORTAL'		=> 'Manage Portal pages',

// Modules Variables
	'ACP_K_VARS'				=> 'Portal Variables',
	'ACP_K_CONFIG'				=> 'Main Config',
	'ACP_K_PORTAL_CONFIG'		=> 'Portal Config',
	'ACP_K_MODULES'				=> 'Mini Modules ',
	'ACP_K_VARS_CONFIG'			=> 'Configure Variables',
	'ACP_K_VARS_CONFIG2'		=> 'Block Module Variables',
	'ACP_K_POLL'				=> 'Poll Variables',
	'ACP_K_NEWSFEEDS'			=> 'Newsfeeds Variables',
	'ACP_K_ACRONYMS'			=> 'Acronyms',
	'ACP_K_WEB_PAGES'			=> 'Web Pages',
	'ACP_K_REFERERS'			=> 'HTTP Referers',
	'ACP_K_TOOLS'				=> 'Additional Mods and Tools',
	'ACP_MOD_VERSION_CHECK'		=> 'Mod Version Check',
// Cloud
	'ACP_K_CLOUD'				=> 'Cloud',
	'ACP_K_CLOUD_EXPLAIN'		=> 'Here you can add, edit and delete tags',
	'ACP_K_CLOUD_TAG'			=> 'Tag',
	'ACP_K_CLOUD_TAG_EXPLAIN'	=> 'Here you can add, edit and delete tags',
	'ACP_K_CLOUD_ADD'			=> 'Add a tag',
	'ACP_K_CLOUD_DELETE'		=> 'Delete tag',
	'ACP_K_CLOUD_EDIT'			=> 'Edit tag',
	'ACP_K_CLOUD_BROWSE'		=> 'Browse tags',
));

// Stargate aka Kiss Plugins module
$lang = array_merge($lang, array(

	'ACP_CAT_K_BLOCKS_MANAGE'		=> 'Portal Blocks',
	'ACP_CAT_K_MENUS_MANAGE'		=> 'Portal Menus',

	'ACP_CAT_K_MODULES_MANAGE'		=> 'Portal Mini Modules',
	'ACP_CAT_K_TOOLS_MANAGE'		=> 'Portal Tools & other Mods',

	'ACP_CAT_K_WEB_PAGES_MANAGE'	=> 'Portal Web Pages',

	'ACP_CAT_PLUGINS'			=> 'Plugins',
	'ACP_CAT_PLUGINS_EXPLAIN'	=> 'Stargate Portal Plug-ins Mod Manager',

	'ACP_PLUGINS'				=> 'Plugins',
	'ACP_PLUGIN_VARIABLES'		=> 'Configure Defaults',
	'ACP_PLUGIN_CONFIG'			=> 'Configure Plugin Defaults',

	'ACP_PLUGIN_MANAGE'			=> 'Manage Plugin',
	'ACP_PLUGIN_ADD'			=> 'Add New Plugin',
	'ACP_PLUGIN_EDIT'			=> 'Edit Plugin',
	'ACP_PLUGIN_DELETE'			=> 'Delete Plugin',
	'ACP_PLUGIN_UPDATE'			=> 'Update plugin',
	'ACP_PLUGIN_UP'				=> 'Move Up',
	'ACP_PLUGIN_DOWN'			=> 'Move Down',
	'AVAILABLE_FORUM_IMAGE'		=> 'Available Images',
	'AVAILABLE_FORUM_IMAGE_EXPLAIN'		=> 'Display a list of available forum images (images/forum_icons/). Hover over an image to see the path/name...',
	'SHOW_FORUM_IMAGES'					=> 'Show available forum images.',
	'ENABLE_PORTAL'				=> 'Enable Portal',
));
// phpbbportal profile fields


// Mike
$lang = array_merge($lang, array(
	'MOD_IMAGES'	=> 'The image mod allows the admin to select images for editing where images are stored in the Admins current style.',
	'MOD_ICONS'		=> 'The image mod allows the admin to select icons for editing where icons are stored in the Admins current style.',
	'VARS_FOUND'	=> 'Editing config for',
));]]></action>
			</edit>
		</open>
		<open src="language/en/acp/permissions_phpbb.php">
			<edit>
				<find>	'acl_a_k_portal'	=&gt; array('lang' =&gt; 'Can view portal settings', 'cat' =&gt; 'portal'),
	'acl_a_k_config'	=&gt; array('lang' =&gt; 'Can manage portal config settings', 'cat' =&gt; 'portal'),
	'acl_a_k_blocks'	=&gt; array('lang' =&gt; 'Can manage portal blocks', 'cat' =&gt; 'portal'),
	'acl_a_k_menus'		=&gt; array('lang' =&gt; 'Can manage portal menus', 'cat' =&gt; 'portal'),
	'acl_a_k_vars'		=&gt; array('lang' =&gt; 'Can manage portal variables', 'cat' =&gt; 'portal'),
	'acl_a_k_modules'	=&gt; array('lang' =&gt; 'Can manage portal modules', 'cat' =&gt; 'portal'),
	'acl_a_k_newsfeeds'	=&gt; array('lang' =&gt; 'Can manage portal newsfeeds', 'cat' =&gt; 'portal'),
	'acl_a_k_poll'		=&gt; array('lang' =&gt; 'Can manage portal polls', 'cat' =&gt; 'portal'),
	'acl_a_k_web_pages'	=&gt; array('lang' =&gt; 'Can manage portal web pages', 'cat' =&gt; 'portal'),
	'acl_a_k_tools'		=&gt; array('lang' =&gt; 'Can manage portal tools', 'cat' =&gt; 'portal'),
	'acl_a_k_mods'		=&gt; array('lang' =&gt; 'Can manage portal mods', 'cat' =&gt; 'portal'),</find>
				<action type="replace-with"><![CDATA[	'acl_a_k_portal'	=> array('lang' => 'Can view portal settings', 'cat' => 'portal'),
	'acl_a_k_web_pages'	=> array('lang' => 'Can manage portal web pages', 'cat' => 'portal'),
	'acl_a_k_tools'		=> array('lang' => 'Can manage portal tools', 'cat' => 'portal'),]]></action>
			</edit>
		</open>
		<open src="language/en/acp/styles.php">
			<edit>
				<find>	'IMG_NEWS_UNREAD_MINE'			=&gt; 'Mews posted to new',</find>
				<action type="replace-with"><![CDATA[	'IMG_NEWS_UNREAD_MINE'			=> 'News posted to new',]]></action>
			</edit>
		</open>
	</action-group>
</mod>
